const Product=require('../models/productModel')

exports.getAllProducts=async (req,res)=>{
    const products=await Product.find({});
    res.status(200).json({
      products
    })}


exports.showProduct=async(req,res,next)=>{
  const product=await Product.findById(req.params.id);
  if(!product){
    res.status(500).json({
      success:false,
      message:"product not found"
    })
    return;
  }
  res.send('product is here');
}     


//admin
exports.addProduct=async(req,res,next)=>{
    const newProduct=req.body
   await Product.insertMany(newProduct)
   console.log(newProduct);
}

exports.editProduct=async (req,res,next)=>{
  let product=await Product.findById(req.params.id);
  if(!product){
    res.status(500).json({
      success:false,
      message:"product not found"
    })
    return;
  }
  product= await Product.findByIdAndUpdate(req.params.id,req.body,{
    new:true,
    runValidators:true,
    useFindAndModify:false
  });
  res.status(200).json({  
    product
  })
}

exports.deleteProduct=async (req,res,next)=>{
  const product=await Product.findById(req.params.id);
  if(!product){
    res.status(500).json({
      success:false,
      message:"product not found"
    })
    return;
  }
  await Product.findByIdAndDelete(req.params.id);
  res.status(200).json({
    success:true,
    message:"product deleted successfully"
  })

}
